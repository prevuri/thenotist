- @note.uploaded_css_files.each do |css_file|
  %link{:type => "text/css", :rel => "stylesheet", :href => css_file.public_path}

%div{:'ng-controller' => 'NoteCtrl', :'ng-init' => "init(#{@note.id})"}

  #note-header
    %h1.note-title= @note.title
    .note-description= @note.description
    #header-border
  #note-main 
    
    .note-pages
      - @note.uploaded_files.each_with_index do |file, i|
        .page
          .file-container{:'ng-click' => 'showNewComment = true', :'ng-init' => "getComments(#{file.id})"}
            .page-container
              %a{ :name => "Page-#{file.page_number}"}
              .note-page{:'file-id' => file.id, :'ng-click' => 'showNewComment = true', :'ng-init' => "fileId = #{file.id}"}  
                - @html = open(file.public_path).read
                = @html.html_safe
          .comment-buttons-container
            .comment-button{:'ng-repeat' => "comment in files[#{file.id}].comments", :line_id => "{{comment.line_id}}", :'ng-click' => 'comment.expanded = !comment.expanded'}
              %i.icon-comments
          .comments-container
            .comments
              = render :partial => 'comments', :locals => {:fileId => file.id}
            .tooltip.fade.right.in#new-comment-panel{:'ng-show' => 'showNewComment'}
              .tooltip-arrow
              .tooltip-inner
                #new-comment-position-line
                  / .left-arrow
                = text_area_tag 'newcomment', nil, :class => 'new_comment_text_field', :placeholder => 'Enter your comment here', :'ng-model' => 'newCommentText'
                .btndiv
                  .new-comment-cancel.btn{:'ng-click' => 'showNewComment = false'}
                    Cancel
                  = submit_tag 'Submit', :id => 'new-comment-submit', :class => 'btn btn-primary', :'ng-click' => 'submitComment()'
